
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../recipe_1_azure_ai_foundary/">
      
      
        <link rel="next" href="../recipe_3_basic_chat/">
      
      
      <link rel="icon" href="../media/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>Setting up model deployment in Azure AI Foundry - Azure AI Bites</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy-a-new-gpt-4o-model-in-azure-ai-foundry" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Azure AI Bites" class="md-header__button md-logo" aria-label="Azure AI Bites" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Azure AI Bites
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Setting up model deployment in Azure AI Foundry
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Azure AI Bites" class="md-nav__button md-logo" aria-label="Azure AI Bites" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Azure AI Bites
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_1_azure_ai_foundary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started with Azure AI Foundry
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Setting up model deployment in Azure AI Foundry
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Setting up model deployment in Azure AI Foundry
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      1. Authentication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-developer-environment-setup" class="md-nav__link">
    <span class="md-ellipsis">
      2. Developer environment setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-deploy-the-gpt-4o-model" class="md-nav__link">
    <span class="md-ellipsis">
      3. Deploy the GPT-4o Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-main-code-components" class="md-nav__link">
    <span class="md-ellipsis">
      4. Main code components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-complete-code-example" class="md-nav__link">
    <span class="md-ellipsis">
      5. Complete code example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-how-to-run-the-example-code" class="md-nav__link">
    <span class="md-ellipsis">
      6. How to run the example code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      7. Next steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_3_basic_chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Chat Completion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_4_migrating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrate to Azure Inference Chat Completion
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_5_generate_image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate an Sales by Region Pie Chart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_6_evaluations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate your Agent
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recipe_7_safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementing safety systems with Azure AI Content Safety
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      1. Authentication
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-developer-environment-setup" class="md-nav__link">
    <span class="md-ellipsis">
      2. Developer environment setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-deploy-the-gpt-4o-model" class="md-nav__link">
    <span class="md-ellipsis">
      3. Deploy the GPT-4o Model
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-main-code-components" class="md-nav__link">
    <span class="md-ellipsis">
      4. Main code components
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-complete-code-example" class="md-nav__link">
    <span class="md-ellipsis">
      5. Complete code example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-how-to-run-the-example-code" class="md-nav__link">
    <span class="md-ellipsis">
      6. How to run the example code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      7. Next steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="deploy-a-new-gpt-4o-model-in-azure-ai-foundry">Deploy a New GPT-4o Model in Azure AI Foundry<a class="headerlink" href="#deploy-a-new-gpt-4o-model-in-azure-ai-foundry" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This article explains how to deploy a new GPT-4o model in Azure AI Foundry. You will learn how to locate the model in the model catalog, configure deployment options, and complete the deployment process. The goal is to make the GPT-4o model available for inference in your Azure AI Foundry project.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Python 3.8 or later</li>
<li>Access to Azure AI Foundry services</li>
<li>An Azure subscription with an Azure AI Foundry project created</li>
<li>Sufficient permissions to deploy models in your project</li>
</ul>
<h2 id="1-authentication">1. Authentication<a class="headerlink" href="#1-authentication" title="Permanent link">&para;</a></h2>
<p>Azure AI Foundry supports several authentication methods for deploying and accessing models. You will need to authenticate to the Azure AI Foundry portal and, if using the SDK or CLI, provide credentials for your Azure subscription.</p>
<p>To authenticate:</p>
<ol>
<li>Sign in to the <a href="https://ai.azure.com" target="_blank">Azure AI Foundry portal</a> with your Azure account.</li>
<li>Select your Azure AI Foundry project.</li>
<li>If using the SDK or CLI, authenticate using your Azure credentials (for example, with <code>az login</code>).</li>
</ol>
<h2 id="2-developer-environment-setup">2. Developer environment setup<a class="headerlink" href="#2-developer-environment-setup" title="Permanent link">&para;</a></h2>
<p>Select your preferred operating system and follow the steps below to prepare your environment.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Windows (PowerShell)</label><label for="__tabbed_1_2">Linux/macOS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ol>
<li>Open a terminal (PowerShell).</li>
<li>Create a project folder:
    <div class="highlight"><pre><span></span><code><span class="n">mkdir</span> <span class="n">gpt4o-deployment</span>
<span class="nb">cd </span><span class="n">gpt4o-deployment</span>
</code></pre></div></li>
<li>Set up a virtual environment:
    <div class="highlight"><pre><span></span><code><span class="n">python</span> <span class="n">-m</span> <span class="n">venv</span> <span class="p">.</span><span class="n">venv</span>
</code></pre></div></li>
<li>Activate the virtual environment:
    <div class="highlight"><pre><span></span><code><span class="p">.\.</span><span class="n">venv</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">Activate</span>
</code></pre></div></li>
<li>Install the required libraries:
    <div class="highlight"><pre><span></span><code><span class="n">pip</span> <span class="n">install</span> <span class="n">azure-ai-inference</span><span class="p">==</span><span class="n">1</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0b9</span> <span class="n">azure-core</span><span class="p">==</span><span class="n">1</span><span class="p">.</span><span class="n">33</span><span class="p">.</span><span class="n">0</span> <span class="n">azure-identity</span><span class="p">==</span><span class="n">1</span><span class="p">.</span><span class="n">21</span><span class="p">.</span><span class="n">0</span>
</code></pre></div></li>
<li>Set up environment variables. Replace the placeholders with the actual values:
    <div class="highlight"><pre><span></span><code><span class="nv">$env:AZURE_OPENAI_CHAT_ENDPOINT</span><span class="p">=</span><span class="s2">&quot;https://&lt;your-resource-name&gt;.openai.azure.com/openai/deployments/&lt;your-deployment-name&gt;&quot;</span>
<span class="nv">$env:AZURE_OPENAI_CHAT_KEY</span><span class="p">=</span><span class="s2">&quot;&lt;your-azure-openai-key&gt;&quot;</span>
</code></pre></div></li>
</ol>
</div>
<div class="tabbed-block">
<ol>
<li>Open a terminal.</li>
<li>Create a project folder:
    <div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>gpt4o-deployment
<span class="nb">cd</span><span class="w"> </span>gpt4o-deployment
</code></pre></div></li>
<li>Set up a virtual environment:
    <div class="highlight"><pre><span></span><code>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv
</code></pre></div></li>
<li>Activate the virtual environment:
    <div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>.venv/bin/activate
</code></pre></div></li>
<li>Install the required libraries:
    <div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>azure-ai-inference<span class="o">==</span><span class="m">1</span>.0.0b9<span class="w"> </span>azure-core<span class="o">==</span><span class="m">1</span>.33.0<span class="w"> </span>azure-identity<span class="o">==</span><span class="m">1</span>.21.0
</code></pre></div></li>
<li>Set up environment variables. Replace the placeholders with the actual values:
    <div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">AZURE_OPENAI_CHAT_ENDPOINT</span><span class="o">=</span><span class="s2">&quot;https://&lt;your-resource-name&gt;.openai.azure.com/openai/deployments/&lt;your-deployment-name&gt;&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">AZURE_OPENAI_CHAT_KEY</span><span class="o">=</span><span class="s2">&quot;&lt;your-azure-openai-key&gt;&quot;</span>
</code></pre></div></li>
</ol>
</div>
</div>
</div>
<h2 id="3-deploy-the-gpt-4o-model">3. Deploy the GPT-4o Model<a class="headerlink" href="#3-deploy-the-gpt-4o-model" title="Permanent link">&para;</a></h2>
<p>You can deploy the GPT-4o model using the Azure AI Foundry portal. The following steps guide you through the process:</p>
<ol>
<li>Go to the <a href="https://ai.azure.com" target="_blank">Azure AI Foundry portal</a>.</li>
<li>Select your project from the list.</li>
<li>In the left navigation, select <strong>Model catalog</strong>.</li>
<li>Use the search bar or filters to find <strong>GPT-4o</strong>.</li>
<li>Select the <strong>GPT-4o</strong> model card to view details.</li>
<li>Click <strong>Deploy</strong>.</li>
<li>In the deployment form:<ul>
<li>Enter a unique deployment name.</li>
<li>Select the deployment type (for GPT-4o, typically <strong>Azure OpenAI</strong>).</li>
<li>Choose the region and other configuration options as required.</li>
<li>Review pricing and terms.</li>
</ul>
</li>
<li>Click <strong>Deploy</strong> to start the deployment process.</li>
<li>Wait for the deployment to complete. You can monitor the status in the <strong>Deployments</strong> or <strong>Models + endpoints</strong> tab.</li>
</ol>
<p>After deployment, you will see the endpoint URL and key in the deployment details. Use these values to access the model for inference.</p>
<h2 id="4-main-code-components">4. Main code components<a class="headerlink" href="#4-main-code-components" title="Permanent link">&para;</a></h2>
<p>The following code demonstrates how to verify your deployment by making a simple chat completion request to the deployed GPT-4o model.</p>
<h3 id="import-required-libraries">Import required libraries<a class="headerlink" href="#import-required-libraries" title="Permanent link">&para;</a></h3>
<p>This code imports the necessary libraries for authentication and making requests to the deployed model.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">azure.ai.inference</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatCompletionsClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">azure.ai.inference.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">SystemMessage</span><span class="p">,</span> <span class="n">UserMessage</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">azure.core.credentials</span><span class="w"> </span><span class="kn">import</span> <span class="n">AzureKeyCredential</span>
</code></pre></div>
<h3 id="create-the-client">Create the client<a class="headerlink" href="#create-the-client" title="Permanent link">&para;</a></h3>
<p>This code creates a client for the deployed GPT-4o model using the endpoint and key.</p>
<div class="highlight"><pre><span></span><code><span class="n">endpoint</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;AZURE_OPENAI_CHAT_ENDPOINT&quot;</span><span class="p">]</span>
<span class="n">key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;AZURE_OPENAI_CHAT_KEY&quot;</span><span class="p">]</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">ChatCompletionsClient</span><span class="p">(</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
    <span class="n">credential</span><span class="o">=</span><span class="n">AzureKeyCredential</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
    <span class="n">api_version</span><span class="o">=</span><span class="s2">&quot;2024-06-01&quot;</span><span class="p">,</span>  <span class="c1"># Update if a newer API version is required</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="send-a-chat-completion-request">Send a chat completion request<a class="headerlink" href="#send-a-chat-completion-request" title="Permanent link">&para;</a></h3>
<p>This code sends a simple prompt to the model and prints the response.</p>
<div class="highlight"><pre><span></span><code><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">complete</span><span class="p">(</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
        <span class="n">SystemMessage</span><span class="p">(</span><span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">),</span>
        <span class="n">UserMessage</span><span class="p">(</span><span class="s2">&quot;How many feet are in a mile?&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</code></pre></div>
<h2 id="5-complete-code-example">5. Complete code example<a class="headerlink" href="#5-complete-code-example" title="Permanent link">&para;</a></h2>
<p>The following is a complete example. Save this code as <code>example.py</code>.</p>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example: Test your deployed GPT-4o model in Azure AI Foundry.</span>

<span class="sd">This script sends a simple prompt to your deployed GPT-4o model and prints the response.</span>
<span class="sd">Set the following environment variables before running:</span>
<span class="sd">- AZURE_OPENAI_CHAT_ENDPOINT: The endpoint URL of your deployment.</span>
<span class="sd">- AZURE_OPENAI_CHAT_KEY: The API key for your deployment.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">azure.ai.inference</span><span class="w"> </span><span class="kn">import</span> <span class="n">ChatCompletionsClient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">azure.ai.inference.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">SystemMessage</span><span class="p">,</span> <span class="n">UserMessage</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">azure.core.credentials</span><span class="w"> </span><span class="kn">import</span> <span class="n">AzureKeyCredential</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send a test prompt to the deployed GPT-4o model and print the response.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;AZURE_OPENAI_CHAT_ENDPOINT&quot;</span><span class="p">]</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;AZURE_OPENAI_CHAT_KEY&quot;</span><span class="p">]</span>

    <span class="n">client</span> <span class="o">=</span> <span class="n">ChatCompletionsClient</span><span class="p">(</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
        <span class="n">credential</span><span class="o">=</span><span class="n">AzureKeyCredential</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
        <span class="n">api_version</span><span class="o">=</span><span class="s2">&quot;2024-06-01&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">complete</span><span class="p">(</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
            <span class="n">SystemMessage</span><span class="p">(</span><span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">),</span>
            <span class="n">UserMessage</span><span class="p">(</span><span class="s2">&quot;How many feet are in a mile?&quot;</span><span class="p">),</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<h2 id="6-how-to-run-the-example-code">6. How to run the example code<a class="headerlink" href="#6-how-to-run-the-example-code" title="Permanent link">&para;</a></h2>
<ol>
<li>Ensure your environment variables are set as described in the developer environment setup.</li>
<li>Save the code above as <code>example.py</code>.</li>
<li>
<p>Run the script:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>example.py
</code></pre></div>
</li>
</ol>
<p>You should see the model's response printed in the terminal.</p>
<h2 id="7-next-steps">7. Next steps<a class="headerlink" href="#7-next-steps" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://learn.microsoft.com/azure/ai-foundry/how-to/model-catalog-overview" target="_blank">Explore the model catalog in Azure AI Foundry portal</a></li>
<li><a href="https://aka.ms/aiservices/inference" target="_blank">Azure AI Inference client library for Python documentation</a></li>
<li><a href="https://learn.microsoft.com/azure/ai-foundry/how-to/deploy-models-managed" target="_blank">Deploy and manage models in Azure AI Foundry</a></li>
<li><a href="https://learn.microsoft.com/azure/ai-services/openai/overview" target="_blank">Azure OpenAI Service documentation</a></li>
<li><a href="https://github.com/Azure/azure-sdk-for-python/tree/main/sdk/ai/azure-ai-inference/samples" target="_blank">Samples for Azure AI Inference SDK</a></li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../recipe_1_azure_ai_foundary/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Getting started with Azure AI Foundry">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Getting started with Azure AI Foundry
              </div>
            </div>
          </a>
        
        
          
          <a href="../recipe_3_basic_chat/" class="md-footer__link md-footer__link--next" aria-label="Next: Basic Chat Completion">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Basic Chat Completion
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.footer", "content.code.copy", "navigation.tabs.sticky", "content.tabs.link"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>